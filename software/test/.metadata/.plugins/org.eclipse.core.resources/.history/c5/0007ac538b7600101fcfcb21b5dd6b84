#include "stm32f4xx.h"

#include "motor.h"

/******* STRUCTURES *********/
struct motor _motor1;

void EXTI0_IRQHandler(void);

void EXTI1_IRQHandler(void);


int main(void)
{
	clock_init();
	motor_init(&_motor1);

    /* Loop forever */
	while(1){

		if (_motor1._brake._pushed == BUTTON_BRAKE_PUSHED){

		}
	}
}

void EXTI0_IRQHandler(void){
	_motor1._run._pushed = BUTTON_BRAKE_PUSHED;
	EXTI->PR |= (1UL << 0);
}

void EXTI1_IRQHandler(void){
	motor_brake(&_motor1);
	EXTI->PR |= (3UL << 0);
}
