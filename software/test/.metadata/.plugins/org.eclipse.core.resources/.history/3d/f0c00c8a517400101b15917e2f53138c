#include "pwm.h"

void pwm_init(uint8_t duty_cycle, uint32_t frequency){

	/* Enable PWM */
	RCC->AHB1ENR |= RCC_AHB1ENR_GPIODEN;

	/* Configure GPIOD port number as general purpose output */
	GPIOD->MODER &= ~GPIO_MODER_MODER12_Msk;
	GPIOD->MODER |=  GPIO_MODER_MODER12_1;

	/* Set TIMER on PD12 */
	GPIOD->AFR[1] |= GPIO_AFRH_AFSEL12_1;

	/* Enable clock access to TIM4 */
	RCC->APB1ENR |= RCC_APB1ENR_TIM4EN;

	TIM4->PSC = TIMER_PSC - 1;
	TIM4->ARR =
}
